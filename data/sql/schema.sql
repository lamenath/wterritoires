CREATE TABLE action_password (id BIGINT AUTO_INCREMENT, profil_id BIGINT, ticket VARCHAR(255), date DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX ticket_idx (ticket), INDEX date_idx (date), INDEX profil_id_idx (profil_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE annonce (id BIGINT AUTO_INCREMENT, createur_id BIGINT, story_id BIGINT, projet_id BIGINT, categorie_id BIGINT, structure_id BIGINT, type VARCHAR(255) DEFAULT 'offre', titre VARCHAR(255) NOT NULL, description LONGTEXT, ville VARCHAR(255), photo VARCHAR(255), slug VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX type_idx (type), INDEX created_at_idx (created_at), UNIQUE INDEX annonce_sluggable_idx (slug), INDEX story_id_idx (story_id), INDEX createur_id_idx (createur_id), INDEX projet_id_idx (projet_id), INDEX structure_id_idx (structure_id), INDEX categorie_id_idx (categorie_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE annonce_categorie (id BIGINT AUTO_INCREMENT, nom VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), UNIQUE INDEX annonce_categorie_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE annonce_competence (id BIGINT AUTO_INCREMENT, annonce_id BIGINT, competence_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, annonce_id, competence_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE annonce_filiere (id BIGINT AUTO_INCREMENT, annonce_id BIGINT, filiere_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, annonce_id, filiere_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE annonce_metier (id BIGINT AUTO_INCREMENT, annonce_id BIGINT, metier_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, annonce_id, metier_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE annonce_theme (id BIGINT AUTO_INCREMENT, annonce_id BIGINT, theme_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, annonce_id, theme_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE commentaire (id BIGINT AUTO_INCREMENT, profil_id BIGINT, story_id BIGINT, content_id BIGINT, content_type VARCHAR(255) NOT NULL, message LONGTEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX profil_id_idx (profil_id), INDEX story_id_idx (story_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE commentaire_vote (id BIGINT AUTO_INCREMENT, profil_id BIGINT, story_id BIGINT, content_id BIGINT, content_type VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX profil_id_idx (profil_id), INDEX story_id_idx (story_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE commune (id BIGINT AUTO_INCREMENT, pays_id BIGINT, nom VARCHAR(255) NOT NULL, description LONGTEXT, photo VARCHAR(255), code_postal VARCHAR(10) NOT NULL, code_insee VARCHAR(10), slug VARCHAR(255), latitude DOUBLE(16, 10), longitude DOUBLE(16, 10), INDEX latitude_idx (latitude), INDEX longitude_idx (longitude), UNIQUE INDEX commune_sluggable_idx (slug), INDEX pays_id_idx (pays_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE competence (id BIGINT AUTO_INCREMENT, nom VARCHAR(255) NOT NULL UNIQUE, description LONGTEXT, is_activated TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_activated_idx (is_activated), UNIQUE INDEX competence_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE consultation (id BIGINT AUTO_INCREMENT, doc_id BIGINT, type_id VARCHAR(255), ip_source VARCHAR(255), visiteur_id BIGINT, date DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX type_id_idx (type_id), INDEX date_idx (date), INDEX visiteur_id_idx (visiteur_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE event (id BIGINT AUTO_INCREMENT, createur_id BIGINT, story_id BIGINT, titre VARCHAR(255) NOT NULL, description LONGTEXT, photo VARCHAR(255), contacts LONGTEXT, lieu VARCHAR(255), adresse LONGTEXT, ville VARCHAR(255), start_at DATETIME, end_at DATETIME, visibilite VARCHAR(255) DEFAULT 'public', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), latitude DOUBLE(16, 10), longitude DOUBLE(16, 10), INDEX start_at_idx (start_at), INDEX end_at_idx (end_at), INDEX visibilite_idx (visibilite), INDEX latitude_idx (latitude), INDEX longitude_idx (longitude), INDEX titre_idx (titre), UNIQUE INDEX event_sluggable_idx (slug), INDEX story_id_idx (story_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE event_admin (id BIGINT AUTO_INCREMENT, event_id BIGINT, profil_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, event_id, profil_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE event_competence (id BIGINT AUTO_INCREMENT, event_id BIGINT, competence_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, event_id, competence_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE event_filiere (id BIGINT AUTO_INCREMENT, event_id BIGINT, filiere_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, event_id, filiere_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE event_invite (id BIGINT AUTO_INCREMENT, event_id BIGINT, profil_id BIGINT, etat VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX etat_idx (etat), PRIMARY KEY(id, event_id, profil_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE event_metier (id BIGINT AUTO_INCREMENT, event_id BIGINT, metier_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, event_id, metier_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE event_structure (id BIGINT AUTO_INCREMENT, event_id BIGINT, structure_id BIGINT, type VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX type_idx (type), PRIMARY KEY(id, event_id, structure_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE event_theme (id BIGINT AUTO_INCREMENT, event_id BIGINT, theme_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, event_id, theme_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE expertise (id BIGINT AUTO_INCREMENT, nom VARCHAR(255) NOT NULL, description LONGTEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), UNIQUE INDEX expertise_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE feedback (id BIGINT AUTO_INCREMENT, profil_id BIGINT, status VARCHAR(255) DEFAULT 'new', titre VARCHAR(255) NOT NULL, message LONGTEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX profil_id_idx (profil_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE filiere (id BIGINT AUTO_INCREMENT, nom VARCHAR(255) NOT NULL UNIQUE, description LONGTEXT, is_activated TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_activated_idx (is_activated), UNIQUE INDEX filiere_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE historique (id BIGINT AUTO_INCREMENT, profil_id BIGINT, type VARCHAR(255), query VARCHAR(255), date DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX type_idx (type), INDEX date_idx (date), INDEX profil_id_idx (profil_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE home_news (id BIGINT AUTO_INCREMENT, photo VARCHAR(255) NOT NULL, titre VARCHAR(100) NOT NULL, text LONGTEXT NOT NULL, titre_lien VARCHAR(20) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE invitation (id BIGINT AUTO_INCREMENT, profil_id BIGINT, projet_id BIGINT, event_id BIGINT, inviteur_id BIGINT, story_id BIGINT, date DATETIME, hidden TINYINT(1), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX date_idx (date), INDEX hidden_idx (hidden), INDEX profil_id_idx (profil_id), INDEX projet_id_idx (projet_id), INDEX event_id_idx (event_id), INDEX story_id_idx (story_id), INDEX inviteur_id_idx (inviteur_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE invitation_email (id BIGINT AUTO_INCREMENT, email VARCHAR(255), projet_id BIGINT, event_id BIGINT, inviteur_id BIGINT, date DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX email_idx (email), INDEX date_idx (date), INDEX projet_id_idx (projet_id), INDEX inviteur_id_idx (inviteur_id), INDEX event_id_idx (event_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE mail_message (id BIGINT AUTO_INCREMENT, message LONGTEXT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE mailing (id BIGINT AUTO_INCREMENT, sujet VARCHAR(255) NOT NULL, message LONGTEXT NOT NULL, is_sent TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX created_at_idx (created_at), INDEX updated_at_idx (updated_at), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE mailing_filiere (id BIGINT AUTO_INCREMENT, filiere_id BIGINT, mailing_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX filiere_id_idx (filiere_id), INDEX mailing_id_idx (mailing_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE mailing_segment (id BIGINT AUTO_INCREMENT, segment_id BIGINT, mailing_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, segment_id, mailing_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE messagerie (id BIGINT AUTO_INCREMENT, profil_id BIGINT, sender_id BIGINT, sujet VARCHAR(150) NOT NULL, message LONGTEXT, seen_at DATETIME, is_sent TINYINT(1) DEFAULT '0' NOT NULL, is_deleted_sender TINYINT(1) DEFAULT '0' NOT NULL, is_deleted_receiver TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_deleted_idx (is_deleted_sender), INDEX is_deleted2_idx (is_deleted_receiver), INDEX is_sent_idx (is_sent), INDEX created_at_idx (created_at), INDEX profil_id_idx (profil_id), INDEX sender_id_idx (sender_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE metier (id BIGINT AUTO_INCREMENT, nom VARCHAR(255) NOT NULL UNIQUE, description LONGTEXT, is_activated TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_activated_idx (is_activated), UNIQUE INDEX metier_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE pays (id BIGINT AUTO_INCREMENT, nom VARCHAR(255) NOT NULL UNIQUE, description LONGTEXT, photo VARCHAR(255), slug VARCHAR(255), UNIQUE INDEX pays_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE photo_projet (id BIGINT AUTO_INCREMENT, createur_id BIGINT, projet_id BIGINT, event_id BIGINT, nom VARCHAR(255) NOT NULL, fichier VARCHAR(255) NOT NULL, date DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX date_idx (date), UNIQUE INDEX photo_projet_sluggable_idx (slug), INDEX createur_id_idx (createur_id), INDEX projet_id_idx (projet_id), INDEX event_id_idx (event_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profil (id BIGINT AUTO_INCREMENT, nom VARCHAR(255) NOT NULL, prenom VARCHAR(255) NOT NULL, adresse VARCHAR(255), ville VARCHAR(255) NOT NULL, code_postal VARCHAR(10) NOT NULL, email VARCHAR(255) NOT NULL UNIQUE, presentation LONGTEXT, login VARCHAR(25) NOT NULL UNIQUE, password VARCHAR(100) NOT NULL, photo VARCHAR(255), photo_crop VARCHAR(255), privacy_type VARCHAR(255) DEFAULT 'public', notify_comment TINYINT(1) DEFAULT '1' NOT NULL, notify_new_item TINYINT(1) DEFAULT '1' NOT NULL, relance_count BIGINT DEFAULT 0, is_activated TINYINT(1) DEFAULT '0' NOT NULL, is_public TINYINT(1) DEFAULT '0' NOT NULL, is_admin TINYINT(1) DEFAULT '0' NOT NULL, last_login DATETIME, slug VARCHAR(255), latitude DOUBLE(16, 10), longitude DOUBLE(16, 10), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX created_at_idx (created_at), INDEX updated_at_idx (updated_at), INDEX is_public_idx (is_public), INDEX latitude_idx (latitude), INDEX longitude_idx (longitude), INDEX prenom_idx (prenom), INDEX nom_idx (nom), UNIQUE INDEX profil_sluggable_idx (slug, login, email), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profil_competence (id BIGINT AUTO_INCREMENT, profil_id BIGINT, competence_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, profil_id, competence_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profil_competence_recherche (id BIGINT AUTO_INCREMENT, profil_id BIGINT, competence_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, profil_id, competence_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profil_expertise (id BIGINT AUTO_INCREMENT, profil_id BIGINT, expertise_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, profil_id, expertise_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profil_filiere (id BIGINT AUTO_INCREMENT, profil_id BIGINT, filiere_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, profil_id, filiere_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profil_metier (id BIGINT AUTO_INCREMENT, profil_id BIGINT, metier_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, profil_id, metier_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profil_profil (id BIGINT AUTO_INCREMENT, profil_id BIGINT, contact_id BIGINT, story_id BIGINT, is_activated BIGINT DEFAULT 0 NOT NULL, date DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX date_idx (date), INDEX is_activated_idx (is_activated), INDEX story_id_idx (story_id), PRIMARY KEY(id, profil_id, contact_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profil_projet (id BIGINT AUTO_INCREMENT, profil_id BIGINT, projet_id BIGINT, role VARCHAR(255) DEFAULT 'observateur', date DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX date_idx (date), INDEX role_idx (role), PRIMARY KEY(id, profil_id, projet_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profil_structure (id BIGINT AUTO_INCREMENT, profil_id BIGINT, structure_id BIGINT, role VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX role_idx (role), PRIMARY KEY(id, profil_id, structure_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE profil_theme (id BIGINT AUTO_INCREMENT, profil_id BIGINT, theme_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, profil_id, theme_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE projet (id BIGINT AUTO_INCREMENT, createur_id BIGINT, story_id BIGINT, commune_id BIGINT, type VARCHAR(255) DEFAULT 'public', nom VARCHAR(255) NOT NULL UNIQUE, action VARCHAR(255), url VARCHAR(255), photo VARCHAR(255), photo_crop VARCHAR(255), objectifs_qualitatif LONGTEXT, objectifs_quantitatif LONGTEXT, strategie LONGTEXT, resultats LONGTEXT, besoins LONGTEXT, lecons LONGTEXT, avancement MEDIUMINT, date_debut DATETIME, date_echeance DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX date_debut_idx (date_debut), INDEX date_echeance_idx (date_echeance), INDEX created_at_idx (created_at), INDEX type_idx (type), UNIQUE INDEX projet_sluggable_idx (slug), INDEX createur_id_idx (createur_id), INDEX commune_id_idx (commune_id), INDEX story_id_idx (story_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE projet_competence (id BIGINT AUTO_INCREMENT, projet_id BIGINT, competence_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, projet_id, competence_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE projet_filiere (id BIGINT AUTO_INCREMENT, projet_id BIGINT, filiere_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, projet_id, filiere_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE projet_idee (id BIGINT AUTO_INCREMENT, profil_id BIGINT NOT NULL, projet_id BIGINT, event_id BIGINT, story_id BIGINT, status VARCHAR(255) DEFAULT 'new', titre VARCHAR(255) NOT NULL, message LONGTEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX profil_id_idx (profil_id), INDEX projet_id_idx (projet_id), INDEX event_id_idx (event_id), INDEX story_id_idx (story_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE projet_metier (id BIGINT AUTO_INCREMENT, projet_id BIGINT, metier_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, projet_id, metier_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE projet_structure (id BIGINT AUTO_INCREMENT, projet_id BIGINT, structure_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, projet_id, structure_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE projet_structure_partenaire (id BIGINT AUTO_INCREMENT, projet_id BIGINT, structure_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, projet_id, structure_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE projet_theme (id BIGINT AUTO_INCREMENT, projet_id BIGINT, theme_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, projet_id, theme_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE ressource (id BIGINT AUTO_INCREMENT, createur_id BIGINT, story_id BIGINT, projet_id BIGINT, event_id BIGINT, nom VARCHAR(255) NOT NULL, resume LONGTEXT, fichier VARCHAR(255), video VARCHAR(30), source VARCHAR(255) NOT NULL, date DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX date_idx (date), UNIQUE INDEX ressource_sluggable_idx (slug), INDEX createur_id_idx (createur_id), INDEX projet_id_idx (projet_id), INDEX event_id_idx (event_id), INDEX story_id_idx (story_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE ressource_filiere (id BIGINT AUTO_INCREMENT, ressource_id BIGINT, filiere_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, ressource_id, filiere_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE ressource_theme (id BIGINT AUTO_INCREMENT, ressource_id BIGINT, theme_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, ressource_id, theme_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE segment (id BIGINT AUTO_INCREMENT, nom VARCHAR(255) NOT NULL, localite VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, latitude DOUBLE(16, 10), longitude DOUBLE(16, 10), INDEX created_at_idx (created_at), INDEX updated_at_idx (updated_at), INDEX latitude_idx (latitude), INDEX longitude_idx (longitude), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE segment_competence (id BIGINT AUTO_INCREMENT, segment_id BIGINT, competence_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, segment_id, competence_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE segment_filiere (id BIGINT AUTO_INCREMENT, segment_id BIGINT, filiere_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, segment_id, filiere_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE segment_metier (id BIGINT AUTO_INCREMENT, segment_id BIGINT, metier_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, segment_id, metier_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE segment_theme (id BIGINT AUTO_INCREMENT, segment_id BIGINT, theme_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, segment_id, theme_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE stats (id BIGINT AUTO_INCREMENT, type VARCHAR(255), total BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX type_idx (type), INDEX created_at_idx (created_at), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE story (id BIGINT AUTO_INCREMENT, profil_id BIGINT NOT NULL, object_id BIGINT, object_model VARCHAR(25), relation_id BIGINT, relation_model VARCHAR(25), story_i18n VARCHAR(255) NOT NULL, type VARCHAR(25) NOT NULL, url VARCHAR(255), params LONGTEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX object_id_idx (object_id), INDEX object_model_idx (object_model), INDEX relation_id_idx (relation_id), INDEX relation_model_idx (relation_model), INDEX type_idx (type), INDEX profil_id_idx (profil_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE story_buddies (id BIGINT AUTO_INCREMENT, story_id BIGINT NOT NULL, profil_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX story_id_idx (story_id), INDEX profil_id_idx (profil_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE story_pictures (id BIGINT AUTO_INCREMENT, story_id BIGINT NOT NULL, photo_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX story_id_idx (story_id), INDEX photo_id_idx (photo_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE structure (id BIGINT AUTO_INCREMENT, createur_id BIGINT, nom VARCHAR(255) NOT NULL, adresse VARCHAR(255), adresse2 VARCHAR(255), ville VARCHAR(255) NOT NULL, code_postal VARCHAR(10) NOT NULL, code_insee VARCHAR(10), tel VARCHAR(15), mail VARCHAR(150), photo VARCHAR(255), photo_crop VARCHAR(255), presentation LONGTEXT, missions LONGTEXT, but LONGTEXT, strategie LONGTEXT, url VARCHAR(255), slug VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, latitude DOUBLE(16, 10), longitude DOUBLE(16, 10), UNIQUE INDEX structure_sluggable_idx (slug), INDEX createur_id_idx (createur_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE structure_competence (id BIGINT AUTO_INCREMENT, structure_id BIGINT, competence_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, structure_id, competence_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE structure_contact (id BIGINT AUTO_INCREMENT, structure_id BIGINT, profil_id BIGINT, civilite VARCHAR(255) DEFAULT 'm', nom VARCHAR(255) NOT NULL, prenom VARCHAR(255) NOT NULL, fonction VARCHAR(255), mail VARCHAR(150), phone VARCHAR(20), requalif TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX structure_id_idx (structure_id), INDEX profil_id_idx (profil_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE structure_filiere (id BIGINT AUTO_INCREMENT, structure_id BIGINT, filiere_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, structure_id, filiere_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE structure_metier (id BIGINT AUTO_INCREMENT, structure_id BIGINT, metier_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, structure_id, metier_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE structure_theme (id BIGINT AUTO_INCREMENT, structure_id BIGINT, theme_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id, structure_id, theme_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tag (id BIGINT AUTO_INCREMENT, name VARCHAR(100), is_triple TINYINT(1), triple_namespace VARCHAR(100), triple_key VARCHAR(100), triple_value VARCHAR(100), INDEX name_idx (name), INDEX triple1_idx (triple_namespace), INDEX triple2_idx (triple_key), INDEX triple3_idx (triple_value), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE tagging (id BIGINT AUTO_INCREMENT, tag_id BIGINT NOT NULL, taggable_model VARCHAR(30), taggable_id BIGINT, INDEX tag_idx (tag_id), INDEX taggable_idx (taggable_model, taggable_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE theme (id BIGINT AUTO_INCREMENT, nom VARCHAR(255) NOT NULL UNIQUE, description LONGTEXT, is_activated TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), INDEX is_activated_idx (is_activated), UNIQUE INDEX theme_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE wish_invitation (id BIGINT AUTO_INCREMENT, profil_id BIGINT, projet_id BIGINT, hidden TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX hidden_idx (hidden), INDEX profil_id_idx (profil_id), INDEX projet_id_idx (projet_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sf_guard_group (id INT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id INT, permission_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id INT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id INT AUTO_INCREMENT, user_id INT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id, ip_address)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user (id INT AUTO_INCREMENT, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id INT, group_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id INT, permission_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
ALTER TABLE action_password ADD CONSTRAINT action_password_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE annonce ADD CONSTRAINT annonce_structure_id_structure_id FOREIGN KEY (structure_id) REFERENCES structure(id) ON DELETE CASCADE;
ALTER TABLE annonce ADD CONSTRAINT annonce_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id) ON DELETE SET NULL;
ALTER TABLE annonce ADD CONSTRAINT annonce_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE annonce ADD CONSTRAINT annonce_createur_id_profil_id FOREIGN KEY (createur_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE annonce ADD CONSTRAINT annonce_categorie_id_annonce_categorie_id FOREIGN KEY (categorie_id) REFERENCES annonce_categorie(id) ON DELETE CASCADE;
ALTER TABLE annonce_competence ADD CONSTRAINT annonce_competence_competence_id_competence_id FOREIGN KEY (competence_id) REFERENCES competence(id) ON DELETE CASCADE;
ALTER TABLE annonce_competence ADD CONSTRAINT annonce_competence_annonce_id_annonce_id FOREIGN KEY (annonce_id) REFERENCES annonce(id) ON DELETE CASCADE;
ALTER TABLE annonce_filiere ADD CONSTRAINT annonce_filiere_filiere_id_filiere_id FOREIGN KEY (filiere_id) REFERENCES filiere(id) ON DELETE CASCADE;
ALTER TABLE annonce_filiere ADD CONSTRAINT annonce_filiere_annonce_id_annonce_id FOREIGN KEY (annonce_id) REFERENCES annonce(id) ON DELETE CASCADE;
ALTER TABLE annonce_metier ADD CONSTRAINT annonce_metier_metier_id_metier_id FOREIGN KEY (metier_id) REFERENCES metier(id) ON DELETE CASCADE;
ALTER TABLE annonce_metier ADD CONSTRAINT annonce_metier_annonce_id_annonce_id FOREIGN KEY (annonce_id) REFERENCES annonce(id) ON DELETE CASCADE;
ALTER TABLE annonce_theme ADD CONSTRAINT annonce_theme_theme_id_theme_id FOREIGN KEY (theme_id) REFERENCES theme(id) ON DELETE CASCADE;
ALTER TABLE annonce_theme ADD CONSTRAINT annonce_theme_annonce_id_annonce_id FOREIGN KEY (annonce_id) REFERENCES annonce(id) ON DELETE CASCADE;
ALTER TABLE commentaire ADD CONSTRAINT commentaire_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id) ON DELETE SET NULL;
ALTER TABLE commentaire ADD CONSTRAINT commentaire_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE commentaire_vote ADD CONSTRAINT commentaire_vote_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id) ON DELETE SET NULL;
ALTER TABLE commentaire_vote ADD CONSTRAINT commentaire_vote_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE commune ADD CONSTRAINT commune_pays_id_pays_id FOREIGN KEY (pays_id) REFERENCES pays(id) ON DELETE CASCADE;
ALTER TABLE consultation ADD CONSTRAINT consultation_visiteur_id_profil_id FOREIGN KEY (visiteur_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE event ADD CONSTRAINT event_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id) ON DELETE SET NULL;
ALTER TABLE event_admin ADD CONSTRAINT event_admin_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE event_admin ADD CONSTRAINT event_admin_event_id_event_id FOREIGN KEY (event_id) REFERENCES event(id) ON DELETE CASCADE;
ALTER TABLE event_competence ADD CONSTRAINT event_competence_event_id_event_id FOREIGN KEY (event_id) REFERENCES event(id) ON DELETE CASCADE;
ALTER TABLE event_competence ADD CONSTRAINT event_competence_competence_id_competence_id FOREIGN KEY (competence_id) REFERENCES competence(id) ON DELETE CASCADE;
ALTER TABLE event_filiere ADD CONSTRAINT event_filiere_filiere_id_filiere_id FOREIGN KEY (filiere_id) REFERENCES filiere(id) ON DELETE CASCADE;
ALTER TABLE event_filiere ADD CONSTRAINT event_filiere_event_id_event_id FOREIGN KEY (event_id) REFERENCES event(id) ON DELETE CASCADE;
ALTER TABLE event_invite ADD CONSTRAINT event_invite_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE event_invite ADD CONSTRAINT event_invite_event_id_event_id FOREIGN KEY (event_id) REFERENCES event(id) ON DELETE CASCADE;
ALTER TABLE event_metier ADD CONSTRAINT event_metier_metier_id_metier_id FOREIGN KEY (metier_id) REFERENCES metier(id) ON DELETE CASCADE;
ALTER TABLE event_metier ADD CONSTRAINT event_metier_event_id_event_id FOREIGN KEY (event_id) REFERENCES event(id) ON DELETE CASCADE;
ALTER TABLE event_structure ADD CONSTRAINT event_structure_structure_id_structure_id FOREIGN KEY (structure_id) REFERENCES structure(id) ON DELETE CASCADE;
ALTER TABLE event_structure ADD CONSTRAINT event_structure_event_id_event_id FOREIGN KEY (event_id) REFERENCES event(id) ON DELETE CASCADE;
ALTER TABLE event_theme ADD CONSTRAINT event_theme_theme_id_theme_id FOREIGN KEY (theme_id) REFERENCES theme(id) ON DELETE CASCADE;
ALTER TABLE event_theme ADD CONSTRAINT event_theme_event_id_event_id FOREIGN KEY (event_id) REFERENCES event(id) ON DELETE CASCADE;
ALTER TABLE feedback ADD CONSTRAINT feedback_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE historique ADD CONSTRAINT historique_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE invitation ADD CONSTRAINT invitation_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id) ON DELETE SET NULL;
ALTER TABLE invitation ADD CONSTRAINT invitation_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE invitation ADD CONSTRAINT invitation_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE invitation ADD CONSTRAINT invitation_inviteur_id_profil_id FOREIGN KEY (inviteur_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE invitation ADD CONSTRAINT invitation_event_id_event_id FOREIGN KEY (event_id) REFERENCES event(id) ON DELETE CASCADE;
ALTER TABLE invitation_email ADD CONSTRAINT invitation_email_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE invitation_email ADD CONSTRAINT invitation_email_inviteur_id_profil_id FOREIGN KEY (inviteur_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE invitation_email ADD CONSTRAINT invitation_email_event_id_event_id FOREIGN KEY (event_id) REFERENCES event(id) ON DELETE CASCADE;
ALTER TABLE mailing_filiere ADD CONSTRAINT mailing_filiere_mailing_id_mailing_id FOREIGN KEY (mailing_id) REFERENCES mailing(id) ON DELETE CASCADE;
ALTER TABLE mailing_filiere ADD CONSTRAINT mailing_filiere_filiere_id_filiere_id FOREIGN KEY (filiere_id) REFERENCES filiere(id) ON DELETE CASCADE;
ALTER TABLE mailing_segment ADD CONSTRAINT mailing_segment_segment_id_segment_id FOREIGN KEY (segment_id) REFERENCES segment(id) ON DELETE CASCADE;
ALTER TABLE mailing_segment ADD CONSTRAINT mailing_segment_mailing_id_mailing_id FOREIGN KEY (mailing_id) REFERENCES mailing(id) ON DELETE CASCADE;
ALTER TABLE messagerie ADD CONSTRAINT messagerie_sender_id_profil_id FOREIGN KEY (sender_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE messagerie ADD CONSTRAINT messagerie_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE photo_projet ADD CONSTRAINT photo_projet_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE photo_projet ADD CONSTRAINT photo_projet_event_id_event_id FOREIGN KEY (event_id) REFERENCES event(id) ON DELETE CASCADE;
ALTER TABLE photo_projet ADD CONSTRAINT photo_projet_createur_id_profil_id FOREIGN KEY (createur_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE profil_competence ADD CONSTRAINT profil_competence_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE profil_competence ADD CONSTRAINT profil_competence_competence_id_competence_id FOREIGN KEY (competence_id) REFERENCES competence(id) ON DELETE CASCADE;
ALTER TABLE profil_competence_recherche ADD CONSTRAINT profil_competence_recherche_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE profil_competence_recherche ADD CONSTRAINT profil_competence_recherche_competence_id_competence_id FOREIGN KEY (competence_id) REFERENCES competence(id) ON DELETE CASCADE;
ALTER TABLE profil_expertise ADD CONSTRAINT profil_expertise_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE profil_expertise ADD CONSTRAINT profil_expertise_expertise_id_expertise_id FOREIGN KEY (expertise_id) REFERENCES expertise(id) ON DELETE CASCADE;
ALTER TABLE profil_filiere ADD CONSTRAINT profil_filiere_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE profil_filiere ADD CONSTRAINT profil_filiere_filiere_id_filiere_id FOREIGN KEY (filiere_id) REFERENCES filiere(id) ON DELETE CASCADE;
ALTER TABLE profil_metier ADD CONSTRAINT profil_metier_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE profil_metier ADD CONSTRAINT profil_metier_metier_id_metier_id FOREIGN KEY (metier_id) REFERENCES metier(id) ON DELETE CASCADE;
ALTER TABLE profil_profil ADD CONSTRAINT profil_profil_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id) ON DELETE SET NULL;
ALTER TABLE profil_profil ADD CONSTRAINT profil_profil_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE profil_profil ADD CONSTRAINT profil_profil_contact_id_profil_id FOREIGN KEY (contact_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE profil_projet ADD CONSTRAINT profil_projet_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE profil_projet ADD CONSTRAINT profil_projet_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE profil_structure ADD CONSTRAINT profil_structure_structure_id_structure_id FOREIGN KEY (structure_id) REFERENCES structure(id) ON DELETE CASCADE;
ALTER TABLE profil_structure ADD CONSTRAINT profil_structure_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE profil_theme ADD CONSTRAINT profil_theme_theme_id_theme_id FOREIGN KEY (theme_id) REFERENCES theme(id) ON DELETE CASCADE;
ALTER TABLE profil_theme ADD CONSTRAINT profil_theme_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE projet ADD CONSTRAINT projet_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id) ON DELETE SET NULL;
ALTER TABLE projet ADD CONSTRAINT projet_createur_id_profil_id FOREIGN KEY (createur_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE projet ADD CONSTRAINT projet_commune_id_commune_id FOREIGN KEY (commune_id) REFERENCES commune(id) ON DELETE CASCADE;
ALTER TABLE projet_competence ADD CONSTRAINT projet_competence_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE projet_competence ADD CONSTRAINT projet_competence_competence_id_competence_id FOREIGN KEY (competence_id) REFERENCES competence(id) ON DELETE CASCADE;
ALTER TABLE projet_filiere ADD CONSTRAINT projet_filiere_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE projet_filiere ADD CONSTRAINT projet_filiere_filiere_id_filiere_id FOREIGN KEY (filiere_id) REFERENCES filiere(id) ON DELETE CASCADE;
ALTER TABLE projet_idee ADD CONSTRAINT projet_idee_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id) ON DELETE SET NULL;
ALTER TABLE projet_idee ADD CONSTRAINT projet_idee_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE projet_idee ADD CONSTRAINT projet_idee_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE projet_idee ADD CONSTRAINT projet_idee_event_id_event_id FOREIGN KEY (event_id) REFERENCES event(id) ON DELETE CASCADE;
ALTER TABLE projet_metier ADD CONSTRAINT projet_metier_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE projet_metier ADD CONSTRAINT projet_metier_metier_id_metier_id FOREIGN KEY (metier_id) REFERENCES metier(id) ON DELETE CASCADE;
ALTER TABLE projet_structure ADD CONSTRAINT projet_structure_structure_id_structure_id FOREIGN KEY (structure_id) REFERENCES structure(id) ON DELETE CASCADE;
ALTER TABLE projet_structure ADD CONSTRAINT projet_structure_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE projet_structure_partenaire ADD CONSTRAINT projet_structure_partenaire_structure_id_structure_id FOREIGN KEY (structure_id) REFERENCES structure(id) ON DELETE CASCADE;
ALTER TABLE projet_structure_partenaire ADD CONSTRAINT projet_structure_partenaire_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE projet_theme ADD CONSTRAINT projet_theme_theme_id_theme_id FOREIGN KEY (theme_id) REFERENCES theme(id) ON DELETE CASCADE;
ALTER TABLE projet_theme ADD CONSTRAINT projet_theme_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE ressource ADD CONSTRAINT ressource_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id) ON DELETE SET NULL;
ALTER TABLE ressource ADD CONSTRAINT ressource_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE ressource ADD CONSTRAINT ressource_event_id_event_id FOREIGN KEY (event_id) REFERENCES event(id) ON DELETE CASCADE;
ALTER TABLE ressource ADD CONSTRAINT ressource_createur_id_profil_id FOREIGN KEY (createur_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE ressource_filiere ADD CONSTRAINT ressource_filiere_ressource_id_ressource_id FOREIGN KEY (ressource_id) REFERENCES ressource(id) ON DELETE CASCADE;
ALTER TABLE ressource_filiere ADD CONSTRAINT ressource_filiere_filiere_id_filiere_id FOREIGN KEY (filiere_id) REFERENCES filiere(id) ON DELETE CASCADE;
ALTER TABLE ressource_theme ADD CONSTRAINT ressource_theme_theme_id_theme_id FOREIGN KEY (theme_id) REFERENCES theme(id) ON DELETE CASCADE;
ALTER TABLE ressource_theme ADD CONSTRAINT ressource_theme_ressource_id_ressource_id FOREIGN KEY (ressource_id) REFERENCES ressource(id) ON DELETE CASCADE;
ALTER TABLE segment_competence ADD CONSTRAINT segment_competence_segment_id_segment_id FOREIGN KEY (segment_id) REFERENCES segment(id) ON DELETE CASCADE;
ALTER TABLE segment_competence ADD CONSTRAINT segment_competence_competence_id_competence_id FOREIGN KEY (competence_id) REFERENCES competence(id) ON DELETE CASCADE;
ALTER TABLE segment_filiere ADD CONSTRAINT segment_filiere_segment_id_segment_id FOREIGN KEY (segment_id) REFERENCES segment(id) ON DELETE CASCADE;
ALTER TABLE segment_filiere ADD CONSTRAINT segment_filiere_filiere_id_filiere_id FOREIGN KEY (filiere_id) REFERENCES filiere(id) ON DELETE CASCADE;
ALTER TABLE segment_metier ADD CONSTRAINT segment_metier_segment_id_segment_id FOREIGN KEY (segment_id) REFERENCES segment(id) ON DELETE CASCADE;
ALTER TABLE segment_metier ADD CONSTRAINT segment_metier_metier_id_metier_id FOREIGN KEY (metier_id) REFERENCES metier(id) ON DELETE CASCADE;
ALTER TABLE segment_theme ADD CONSTRAINT segment_theme_theme_id_theme_id FOREIGN KEY (theme_id) REFERENCES theme(id) ON DELETE CASCADE;
ALTER TABLE segment_theme ADD CONSTRAINT segment_theme_segment_id_segment_id FOREIGN KEY (segment_id) REFERENCES segment(id) ON DELETE CASCADE;
ALTER TABLE story ADD CONSTRAINT story_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE story_buddies ADD CONSTRAINT story_buddies_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id) ON DELETE CASCADE;
ALTER TABLE story_buddies ADD CONSTRAINT story_buddies_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE story_pictures ADD CONSTRAINT story_pictures_story_id_story_id FOREIGN KEY (story_id) REFERENCES story(id) ON DELETE CASCADE;
ALTER TABLE story_pictures ADD CONSTRAINT story_pictures_photo_id_photo_projet_id FOREIGN KEY (photo_id) REFERENCES photo_projet(id) ON DELETE CASCADE;
ALTER TABLE structure ADD CONSTRAINT structure_createur_id_profil_id FOREIGN KEY (createur_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE structure_competence ADD CONSTRAINT structure_competence_structure_id_structure_id FOREIGN KEY (structure_id) REFERENCES structure(id) ON DELETE CASCADE;
ALTER TABLE structure_competence ADD CONSTRAINT structure_competence_competence_id_competence_id FOREIGN KEY (competence_id) REFERENCES competence(id) ON DELETE CASCADE;
ALTER TABLE structure_contact ADD CONSTRAINT structure_contact_structure_id_structure_id FOREIGN KEY (structure_id) REFERENCES structure(id) ON DELETE CASCADE;
ALTER TABLE structure_contact ADD CONSTRAINT structure_contact_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE structure_filiere ADD CONSTRAINT structure_filiere_structure_id_structure_id FOREIGN KEY (structure_id) REFERENCES structure(id) ON DELETE CASCADE;
ALTER TABLE structure_filiere ADD CONSTRAINT structure_filiere_filiere_id_filiere_id FOREIGN KEY (filiere_id) REFERENCES filiere(id) ON DELETE CASCADE;
ALTER TABLE structure_metier ADD CONSTRAINT structure_metier_structure_id_structure_id FOREIGN KEY (structure_id) REFERENCES structure(id) ON DELETE CASCADE;
ALTER TABLE structure_metier ADD CONSTRAINT structure_metier_metier_id_metier_id FOREIGN KEY (metier_id) REFERENCES metier(id) ON DELETE CASCADE;
ALTER TABLE structure_theme ADD CONSTRAINT structure_theme_theme_id_theme_id FOREIGN KEY (theme_id) REFERENCES theme(id) ON DELETE CASCADE;
ALTER TABLE structure_theme ADD CONSTRAINT structure_theme_structure_id_structure_id FOREIGN KEY (structure_id) REFERENCES structure(id) ON DELETE CASCADE;
ALTER TABLE wish_invitation ADD CONSTRAINT wish_invitation_projet_id_projet_id FOREIGN KEY (projet_id) REFERENCES projet(id) ON DELETE CASCADE;
ALTER TABLE wish_invitation ADD CONSTRAINT wish_invitation_profil_id_profil_id FOREIGN KEY (profil_id) REFERENCES profil(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
